iTunes={getMachineID:function(){console.log("TunesViewer: In function <getMachineID>");return""},getPreferences:function(){return{pingEnabled:true}},installedSoftwareApplications:[],doDialogXML:function(a,c){},playURL:function(a){window.DOWNLOADINTERFACE.preview("preview",a.url);return"not 0"},showMediaPlayer:function(b,a,c){console.log("showMediaPlayer "+b);this.playURL({url:b})},openURL:function(a){console.log("openURL"+a);location.href=a;setTitle()},addProtocol:function(c){console.log("addProtocol called:"+c);if(c.indexOf("<key>navbar</key>")===-1){c=new DOMParser().parseFromString(c,"text/xml");var e=c.getElementsByTagName("key"),b="",a="";for(var d=0;d<e.length;d++){if(e[d].textContent=="URL"){b=e[d].nextSibling.textContent}else{if(e[d].textContent=="songName"||e[d].textContent=="itemName"){a=e[d].nextSibling.textContent}}}if(b!=""){window.DOWNLOADINTERFACE.download(a,document.title,b)}}},stop:function(){document.getElementById("previewer-container").parentNode.removeChild(document.getElementById("previewer-container"));return true},doPodcastDownload:function(b,a){alert("podcastdownload");console.log(b.getAttribute("description"));console.log(b.getAttribute("episode-url"));window.DOWNLOADINTERFACE.download(b.getAttribute("description"),document.title,b.getAttribute("episode-url"))},doAnonymousDownload:function(a){console.log("Going to item description url");location.href=a.url;setTitle()},getUserDSID:function(){return 0},putURLOnPasteboard:function(b,c){location.href="copyurl://"+encodeURI(b)},webkitVersion:function(){return(/AppleWebKit\/([\d.]+)/).exec(navigator.userAgent)[0]}};function setTitle(){if(document.title==""){if(document.getElementsByTagName("h1").length>0){window.DOWNLOADINTERFACE.setTitle(document.getElementsByTagName("h1")[0].innerHTML)}else{window.DOWNLOADINTERFACE.setTitle("TunesViewer")}}else{window.DOWNLOADINTERFACE.setTitle(document.title)}}function fixTransparent(b){var a;console.log("TunesViewer: Entering the function <fixTransparent>.");for(a=0;a<b.length;a++){if(window.getComputedStyle(b[a]).color==="rgba(0, 0, 0, 0)"){b[a].style.color="inherit"}if(b[a].parentNode.getAttribute("class")==="title"){b[a].style.background="transparent"}}}function TunesViewerEmptyFunction(){}function removeListeners(b){var a;for(a=0;a<b.length;a++){b[a].onmouseover=TunesViewerEmptyFunction;b[a].onclick=TunesViewerEmptyFunction;b[a].onmousedown=TunesViewerEmptyFunction}}document.addEventListener("DOMContentLoaded",function(){var k,u,f,l,o,m,n,d,p,b,q,v,s;setTitle();var g=document.getElementsByTagName("img");for(o=0;o<g.length;o++){if(g[o].getAttribute("src-swap")!=null){g[o].setAttribute("src",g[o].getAttribute("src-swap"))}}b=function(a){console.log("TunesViewer: click event listener: "+a);location.href=a};q=function(a){console.log("TunesViewer: opening: "+a);location.href=a};v=function(a){window.DOWNLOADINTERFACE.subscribe(a)};s=function(e,a,i){iTunes.addProtocol("<xml><key>URL</key><value><![CDATA["+e+"]]></value><key>artistName</key><value><![CDATA["+a+"]]></value><key>fileExtension</key><value>zip</value><key>songName</key><value><![CDATA["+i+"]]></value></xml>")};var p=document.getElementsByTagName("button");l=document.getElementsByTagName("div");for(var o in p){if(p[o]){if(p[o].textContent&&p[o].textContent.trim()==="Subscribe Free"){if(p[o].getAttribute("subscribe-podcast-url")!==null){p[o].addEventListener("click",function(){v(this.getAttribute("subscribe-podcast-url"))},true)}else{if(p[o].getAttribute("course-feed-url")!==null){p[o].addEventListener("click",function(){v(this.getAttribute("course-feed-url"))},true)}}}if(p[o].hasAttribute&&p[o].hasAttribute("disabled")){removeListeners(p[o]);p[o].addEventListener("click",function(){s(getAttribute("episode-url"),getAttribute("artist-name"),getAttribute("item-name"))},false);p[o].removeAttribute("disabled")}}}k=document.getElementsByTagName("a");for(u in k){if(k.hasOwnProperty(u)){if(k[u].target==="_blank"){k[u].target=""}else{if(k[u].target){k[u].target=""}}}}l=document.getElementsByTagName("div");for(var o=0;o<l.length;o++){if(l[o].getAttribute("download-url")!=null&&(l[o].textContent.indexOf("FREE")!=-1||l[o].textContent.indexOf("Download")!=-1)){removeListeners(l[o].parentNode.parentNode);removeListeners(l[o].parentNode.childNodes);removeListeners(l[o].childNodes);var c=l[o].getAttribute("download-url");l[o].innerHTML="<a class='media' onclick=\"window.event.stopPropagation();window.DOWNLOADINTERFACE.download(this.getAttribute('title'), document.title, this.getAttribute('download-url'));\" title=\""+l[o].getAttribute("item-title")+'" download-url="'+c+"\"><span class='download_open'>Download</span> "+file_ext(c)+"</a>";l[o].parentNode.parentNode.addEventListener("click",function(){console.log("preview working!");console.log(this.innerHTML);console.log(this.childNodes[5].innerHTML);window.DOWNLOADINTERFACE.preview("preview",this.childNodes[5].childNodes[1].getAttribute("download-url"))})}if(l[o].getAttribute("goto-url")!=null){l[o].addEventListener("click",function(){console.log("goto"+this.getAttribute("goto-url"));location.href=this.getAttribute("goto-url");setTitle()});document.body.style.maxWidth="100%"}if(l[o].getAttribute("role")=="button"&&l[o].getAttribute("aria-label")=="SUBSCRIBE FREE"){n="";console.log("subscribe-button");removeListeners(l[o].parentNode);removeListeners(l[o].parentNode.parentNode);for(m=0;m<l.length;m++){if(l[m].getAttribute("podcast-feed-url")!=null){n=l[m].getAttribute("podcast-feed-url")}}l[o].addEventListener("click",function(){console.log(n);window.DOWNLOADINTERFACE.subscribe(n)});iTSCircularPreviewControl=function(e){return 0}}}fixTransparent(document.getElementsByTagName("h1"));fixTransparent(document.getElementsByTagName("h2"));fixTransparent(document.getElementsByTagName("div"));fixTransparent(k);for(o=0;o<l.length;o++){if(l[o].getAttribute("download-url")!==null&&l[o].textContent.indexOf("FREE")!==-1){console.log("TunesViewer: getting attribute: "+l[o].getAttribute("download-url"));removeListeners(l[o].childNodes);var c=l[o].getAttribute("download-url");l[o].addEventListener("mouseDown",function(){q(getAttribute("download-url"))},false)}if(l[o].getAttribute("role")==="button"&&l[o].getAttribute("aria-label")==="Subscribe Free"){n="";console.log("TunesViewer: subscribe-button");removeListeners(l[o].parentNode);removeListeners(l[o].parentNode.parentNode);for(m=0;m<l.length;m++){if(l[m].getAttribute("podcast-feed-url")!==null){n=l[m].getAttribute("podcast-feed-url")}}l[o].addEventListener("click",b(n),false)}}if(document.getElementById("search-itunes-u")!==null){document.getElementById("search-itunes-u").style.height=90}if(document.getElementById("search-podcast")!==null){document.getElementById("search-podcast").style.height=90}var h=document.getElementsByClassName("absolute");for(u in h){try{h[u].style.position="absolute";h[u].parentNode.style.position="relative";h[u].parentNode.style.display="block";h[u].style.fontWeight="bold";if(h[u].parentNode.parentNode.parentNode.parentNode.parentNode.tagName.toLowerCase()=="table"){h[u].parentNode.parentNode.parentNode.parentNode.parentNode.style.width="100%"}}catch(r){}}var t=document.getElementsByTagName("hr");for(var w in t){if(t[w].parentNode&&t[w].parentNode.tagName.toLowerCase()=="select"){t[w].parentNode.removeChild(t[w])}}f=document.createElement("style");f.type="text/css";f.innerHTML="* { -webkit-user-select: initial !important } div.search-form {height: 90}";document.body.appendChild(f);console.log("TunesViewer: JS OnPageShow Ran Successfully.")},false);